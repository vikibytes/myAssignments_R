var forbes=(function(app,$){app.lander=(function($){var debug=null,number_format=null,remove_diacritics=null,remove_trailing_zeros=null,_entity_template=null,$overlay=null,_overlay_template=null,_overlay_visible=false,$version_tabs=null,$tabs=null,$filters=null,$prev=null,$next=null,$list_search=null,$headers=null,_year=null,_uri=null,_type=null,_subtype=null,_zone=null,_is_full_list=null,_entities=[],_matching_entities=[],_handle_hash=null,_default_search_text=null,_search_fields=[],_waiting_for_data=false,_active_tab=null,_active_tab_field=null,_active_tab_function=null,_version_tab=null,_version_tab_field=null,_filter_values=[],_page=null,_search=null,_header=null,_sort=null,_sort_reverse=false,_initial_data_displayed=false,_profiles_between_ads=10,_profiles_between_pages=45,_old_browser_ad_limit=15,_list_colspan=null,_original_pathname=window.location.pathname,_current_url_page=1,_scroll_handling_disabled=false,_realtime_scroll_interval=null,_views_until_reload_overlay_ad=0,_overlay_ad_setup=false,_overlay_slot=null,_track=null,_category=null,_initial_real_time_scroll=false,_full_list_ad_slots=[];function _init(){$.removeCookie("ox_cookie",{path:"/",domain:".forbes.com"});debug=forbes.util.debug;number_format=forbes.util.number_format;remove_diacritics=forbes.util.remove_diacritics;remove_trailing_zeros=forbes.util.remove_trailing_zeros;_track=forbes.event_tracking.track_ga_event;$version_tabs=$(".navigation .tab.version");$tabs=$(".navigation .tab.select");$filters=$(".navigation li.filter");$prev=$(".grid .prev");$next=$(".grid .next");$list_search=$(".list_search");$headers=$("#the_list th");$overlay=$("#the_list .overlay");_parse_url();_init_list_specific_data();_init_state_variables();_init_entity_data();_init_attach_event_handlers();_init_static_click_tracking();_init_overlay();_init_history();_calculate_matching_entities();}function _parse_url(){var match=window.location.pathname.match(/(.*?\/)(\d+)?\/?$/);if(match){_original_pathname=match[1];if(typeof match[2]!=="undefined"){_current_url_page=parseInt(match[2]);}else{_current_url_page=1;}}}function _init_list_specific_data(){_entity_template=$(".list-item-template").html();_overlay_template=$(".overlay-template").html();_year=$("#the_list").attr("data-year");_uri=$("#the_list").attr("data-uri");_type=$("#the_list").attr("data-type");_subtype=$("#the_list").attr("data-subtype");_zone=$("#the_list").attr("data-zone");_is_full_list=$("#entity_list").length>0;_category=_is_full_list?"FullList":"Lander";if($("#the_list").attr("data-search-fields").length>0){_search_fields=$("#the_list").data("search-fields");}}function _init_state_variables(){var $version_tab=$(".navigation .tab.version.active");if($version_tab.length>0){_version_tab=$version_tab.data("value");_version_tab_field=$version_tab.data("field");_sort=_version_tab_field;}var active_tab=$(".navigation .tab.select.active");if(active_tab.length>0){_active_tab=active_tab.data("value");_active_tab_field=active_tab.data("field");_active_tab_function=active_tab.data("function");_sort=_active_tab_field;}_list_colspan=$("#the_list tr").eq(0).find("th").length;$filters.each(function(index,element){var field=$(this).find(".dropdown").data("field");var value="All";var filter_obj={field:field,value:value};_filter_values.push(filter_obj);});_page=1;_search="";_default_search_text=$list_search.val();}function _init_entity_data(){var request_data;request_data={year:_year,uri:_uri,type:_type};$.ajax({url:"/ajax/list/data",dataType:"json",data:request_data}).done(function(data){if(data===null||data.length===0){debug("No list data available for: ");debug(request_data);_entities=null;return;}_entities=data;}).fail(function(){debug("Error loading list data for:");debug(request_data);_entities=null;});}function _init_attach_event_handlers(){var $real_time_link=$("a.torealtime");if(_is_full_list){var $scroll_to=$(".realtimescroll");$real_time_link.click(function(){forbes.util.scroll_to_obj($scroll_to);_track([_category,"RealTimeLink","Click"]);$(".navigation .tab.version.realtime").click();return false;});$(".header_static_link").click(function(){_track(["ProfileHeader","StaticClick",_uri]);$version_tabs.each(function(){var $this=$(this);if($this.data("value")==="static"){_version_tab_action($this);}});return false;});$(".header_realtime_link").click(function(){_track(["ProfileHeader","RealTimeClick",_uri]);$version_tabs.each(function(){var $this=$(this);if($this.data("value")==="realtime"){_version_tab_action($this);}});return false;});}else{$real_time_link.click(function(event){var $this=$(this);var href=$this.attr("href");_track_link_click(href,_category,"RealTimeLink","Click");event.preventDefault();});$(".header_static_link").click(function(event){var $this=$(this);var href=$this.attr("href");_track_link_click(href,"ProfileHeader","StaticClick",_uri);event.preventDefault();});$(".header_realtime_link").click(function(event){var $this=$(this);var href=$this.attr("href");_track_link_click(href,"ProfileHeader","RealTimeClick",_uri);event.preventDefault();});}$version_tabs.click(function(){var $this=$(this);var version_tab=$this.data("value");_track([_category,"TabClicked",version_tab]);_version_tab_action($this);});$tabs.click(function(){var $this=$(this);var active_tab=$this.data("value");var active_tab_field=$this.data("field");var active_tab_function=$this.data("function");if(active_tab===_active_tab){return;}_track([_category,"TabClicked",active_tab]);$tabs.removeClass("active");$this.addClass("active");_active_tab=active_tab;_active_tab_field=active_tab_field;_active_tab_function=active_tab_function;_page=1;if(active_tab_function==="asc"){if(_header===_active_tab_field){$headers.find("span").removeClass("up").addClass("down");}else{$headers.removeClass("active");$headers.find("span").remove();_header=null;}_sort=active_tab_field;_sort_reverse=false;}else{if(active_tab_function==="desc"){if(_header===_active_tab_field){$headers.find("span").removeClass("down").addClass("up");}else{$headers.removeClass("active");$headers.find("span").remove();_header=null;}_sort=active_tab_field;_sort_reverse=true;}else{if(_header===null){_sort="position";_sort_reverse=false;}}}if("best-employers"===_uri){for(var i=0;i<_filter_values.length;i++){var filter_value=_filter_values[i];filter_value.value="All";}$filters.each(function(){var $all_li=$(this).find("ul ul li:first-child");$all_li.siblings().removeClass("active");$all_li.addClass("active");});}_hide_overlay();_calculate_matching_entities();});var $filter_selections=$filters.find("ul ul li");$filter_selections.click(function(){var filter;var $this=$(this);if($this.hasClass("disabled")){return;}$this.siblings().removeClass("active");$this.addClass("active");var value=$this.find("a").attr("id");var field=$this.parent().parent().parent().data("field");_track([_category,"Filter",field]);for(var i=0;i<_filter_values.length;i++){filter=_filter_values[i];if(filter.field===field){filter.value=value;break;}}if("best-employers"===_uri){var $first_tab=$tabs.first();var active_tab=$first_tab.data("value");var active_tab_field=$first_tab.data("field");var active_tab_function=$first_tab.data("function");$tabs.removeClass("active");$first_tab.addClass("active");_active_tab=active_tab;_active_tab_field=active_tab_field;_active_tab_function=active_tab_function;}_hide_overlay();_page=1;_calculate_matching_entities();});$prev.click(function(){if($prev.hasClass("inactive")){return;}_page--;_track([_category,"PrevClicked","Page"+_page]);_calculate_matching_entities();});$next.click(function(){if($next.hasClass("inactive")){return;}_page++;_track([_category,"NextClicked","Page"+_page]);_calculate_matching_entities();});$list_search.focus(function(){var $this=$(this);if($this.val()===_default_search_text){$this.val("");}}).blur(function(){var $this=$(this);if($this.val()===""){$this.val(_default_search_text);}}).keyup(function(){var $this=$(this);_search=$this.val();_track([_category,"SearchType",_search]);_page=1;_calculate_matching_entities();});$("body").keyup(function(event){if(_overlay_visible){if(37===event.keyCode){var $prev=$("#the_list .overlay .prev");if($prev.length){var uri=""+$prev.data("uri");_show_overlay(uri);}}else{if(39===event.keyCode){var $next=$("#the_list .overlay .next");if($next.length){var uri=""+$next.data("uri");_show_overlay(uri);}}}}});$headers.click(function(){var $this=$(this);if(!$this.data("field")){return;}var header=$this.data("field");var arrow;if(header===_header){_sort_reverse=!_sort_reverse;}else{_sort_reverse=false;}if(_active_tab_function==="asc"||_active_tab_function==="desc"){var $first_tab=$tabs.first();$tabs.removeClass("active");$first_tab.addClass("active");_active_tab=$first_tab.data("value");_active_tab_field=$first_tab.data("field");_active_tab_function=$first_tab.data("function");}$headers.removeClass("active");$headers.find("span").remove();$this.addClass("active");arrow="<span class='"+(_sort_reverse?"up":"down")+"'></span>";$this.append(arrow);_header=header;_sort=_header;_page=1;_calculate_matching_entities();});}function _version_tab_action($this){var version_tab=$this.data("value");var version_tab_field=$this.data("field");$version_tabs.removeClass("active");$this.addClass("active");_version_tab=version_tab;_version_tab_field=version_tab_field;_page=1;$tabs.removeClass("active");_active_tab=null;_active_tab_field=null;_active_tab_function=null;if(_header===version_tab_field){$headers.find("span").removeClass("up").addClass("down");}else{$headers.removeClass("active");$headers.find("span").remove();_header=null;}for(var i=0;i<_filter_values.length;i++){var filter_value=_filter_values[i];filter_value.value="All";}$filters.each(function(){var $all_li=$(this).find("ul ul li:first-child");$all_li.siblings().removeClass("active");$all_li.addClass("active");});_search="";$list_search.val(_default_search_text);_hide_overlay();_sort=version_tab_field;_sort_reverse=false;if(version_tab==="static"){$(".list-header-worth").hide();}else{$(".list-header-worth").show();}_calculate_matching_entities();}function _init_static_click_tracking(){$("#top_promo .promostory a").click(function(event){var $this=$(this);var href=$this.attr("href");_track_link_click(href,_category,"TopStoryClick",href);event.preventDefault();});$("#galleries li.promostory a").click(function(event){var $this=$(this);var href=$this.attr("href");_track_link_click(href,_category,"GalleryClick",href);event.preventDefault();});$("#video .video_promos li.promostory a").click(function(event){var $this=$(this);var href=$this.attr("href");_track_link_click(href,_category,"VideoClick",href);event.preventDefault();});$("#real_time li a").click(function(event){var $this=$(this);var href=$this.attr("href");_track_link_click(href,_category,"RealTimeProfileClick",href);event.preventDefault();});$("#the_list").on("click","tr.data a",function(event){var $this=$(this);var href=$this.attr("href");_track_link_click(href,_category,"ProfileClick",href);event.preventDefault();});}function _track_link_click(link,category,action,label){_track([category,action,label]);setTimeout(function(){window.location=link;},250);}function _init_overlay(){$("#the_list .overall").on("click",".list_item_content",function(){var uri=""+$(this).data("uri");_track([_category,"OverlayShow",uri]);_show_overlay(uri);return false;});$("#the_list").on("click",".close-button",function(){_hide_overlay();});$("#the_list .overlay").on("click",".prev, .next",function(){var $this=$(this);var uri=$this.data("uri");var direction=$this.hasClass("next")?"next":"prev";_track([_category,"OverlayChange",direction]);_show_overlay(uri);});$("#the_list .overlay").on("click",".full-profile",function(event){var $this=$(this);var href=$this.attr("href");_track_link_click(href,_category,"OverlayFullProfile",href);event.preventDefault();});}function _show_overlay(uri){var entity,prev_entity,next_entity;for(var i=0;i<_matching_entities.length;i++){var matching_entity=_matching_entities[i];if(matching_entity.uri===uri){entity=_matching_entities[i];if(i>0){prev_entity=_matching_entities[i-1];}if(_matching_entities.length>i+1){next_entity=_matching_entities[i+1];}break;}}if(typeof entity!=="object"){return;}var $container=$(".overlay-content-container");$container.html(_generate_overlay_html(prev_entity,entity,next_entity));$overlay.show();$overlay.animate({opacity:1},500);_overlay_visible=true;_load_overlay_ad();}function _generate_overlay_html(prev_entity,entity,next_entity){try{var overlay_template=_overlay_template;overlay_template=overlay_template.replace(/<br>/gi,"\r\n");var rank=entity.rank;if(typeof rank==="undefined"){overlay_template=overlay_template.replace(/\[RANK\]/g,"");}else{rank="#"+rank;}var name=entity.name;if(typeof name==="undefined"){overlay_template=overlay_template.replace(/\[NAME\]/g,"");}var image_uri=entity.imageUri,image_type=_make_image_type(entity),link=_make_entity_uri_link(entity),prev_uri;if(typeof prev_entity!=="undefined"){prev_uri=prev_entity.uri;}else{overlay_template=overlay_template.replace(/.*\[PREV_URI\].*/g,"");}var next_uri;if(typeof next_entity!=="undefined"){next_uri=next_entity.uri;}else{overlay_template=overlay_template.replace(/.*\[NEXT_URI\].*/g,"");}overlay_template=overlay_template.replace(/\[RANK\]/g,rank);overlay_template=overlay_template.replace(/\[NAME\]/g,name);if(entity.thumbnail){var dimensions=overlay_template.match(/data-src="[^"'>]*\[IMAGE_URI\]_(\d+)x(\d+)[^"'>]/);overlay_template=overlay_template.replace(/data-src="[^"'>]*\[IMAGE_URI\][^"'>]*"/g,'data-src="'+forbes.util.make_image_link(entity.thumbnail,dimensions[1],dimensions[1])+'"');}else{overlay_template=overlay_template.replace(/\[IMAGE_TYPE\]/g,image_type);overlay_template=overlay_template.replace(/\[IMAGE_URI\]/g,image_uri);}overlay_template=overlay_template.replace(/\[LINK\]/g,link);overlay_template=overlay_template.replace(/\[PREV_URI\]/g,prev_uri);overlay_template=overlay_template.replace(/\[NEXT_URI\]/g,next_uri);if("best-places-for-business"===_uri){var population=entity.population;if(typeof population==="undefined"){overlay_template=overlay_template.replace(/.*\[POPULATION\].*/g,"");}else{population=number_format(population);}var grossMetroProduct=entity.grossMetroProduct;if(typeof grossMetroProduct==="undefined"){overlay_template=overlay_template.replace(/.*\[GROSS_METRO_PRODUCT\].*/g,"");}else{grossMetroProduct="$$"+grossMetroProduct+" B";}var projectedAnnualJobGrowth=entity.projectedAnnualJobGrowth;if(typeof projectedAnnualJobGrowth==="undefined"){overlay_template=overlay_template.replace(/.*\[PROJECTED_ANNUAL_JOB_GROWTH\].*/g,"");}else{projectedAnnualJobGrowth+="%";}var collegeAttainment=entity.collegeAttainment;if(typeof collegeAttainment==="undefined"){overlay_template=overlay_template.replace(/.*\[COLLEGE_ATTAINMENT\].*/g,"");}else{collegeAttainment+="%";}var hiTechEmployment=entity.hiTechEmployment;if(typeof hiTechEmployment==="undefined"){overlay_template=overlay_template.replace(/.*\[HI_TECH_EMPLOYMENT\].*/g,"");}else{hiTechEmployment+="%";}overlay_template=overlay_template.replace(/\[POPULATION\]/g,population);overlay_template=overlay_template.replace(/\[GROSS_METRO_PRODUCT\]/g,grossMetroProduct);overlay_template=overlay_template.replace(/\[PROJECTED_ANNUAL_JOB_GROWTH\]/g,projectedAnnualJobGrowth);overlay_template=overlay_template.replace(/\[COLLEGE_ATTAINMENT\]/g,collegeAttainment);overlay_template=overlay_template.replace(/\[HI_TECH_EMPLOYMENT\]/g,hiTechEmployment);}else{if("asia200"===_uri){var country=entity.country;if(typeof country==="undefined"){overlay_template=overlay_template.replace(/.*\[COUNTRY\].*/g,"");}var industry=entity.industry;if(typeof industry==="undefined"){overlay_template=overlay_template.replace(/.*\[INDUSTRY\].*/g,"");}var revenue=entity.revenue;if(typeof revenue==="undefined"){overlay_template=overlay_template.replace(/.*\[REVENUE\].*/g,"");}else{revenue="$$"+remove_trailing_zeros(number_format(revenue,0))+" million";}overlay_template=overlay_template.replace(/\[COUNTRY\]/g,country);overlay_template=overlay_template.replace(/\[INDUSTRY\]/g,industry);overlay_template=overlay_template.replace(/\[REVENUE\]/g,revenue);}else{if("best-employers"===_uri){var industries;var industry_array=entity.industries;if(typeof industry_array==="undefined"){overlay_template=overlay_template.replace(/.*\[INDUSTRIES\].*/g,"");}else{industries="";for(var i=0;i<industry_array.length;i++){if(i!==0){industries+="; ";}industries+=industry_array[i];}}var headquarters=entity.headquarters;if(typeof headquarters==="undefined"){overlay_template=overlay_template.replace(/.*\[HEADQUARTERS\].*/g,"");}overlay_template=overlay_template.replace(/\[INDUSTRIES\]/g,industries);overlay_template=overlay_template.replace(/\[HEADQUARTERS\]/g,headquarters);}else{if(_uri==="fab50"){var country=entity.country;if(typeof country==="undefined"){overlay_template=overlay_template.replace(/.*\[COUNTRY\].*/g,"");}var revenue=entity.revenue;if(typeof revenue==="undefined"){overlay_template=overlay_template.replace(/.*\[REVENUE\].*/g,"");}else{revenue="$"+remove_trailing_zeros(number_format(revenue/1000,1))+" B";}var market_value=entity.marketValue;if(typeof market_value==="undefined"){overlay_template=overlay_template.replace(/.*\[MARKET_VALUE\].*/g,"");}else{market_value="$"+remove_trailing_zeros(number_format(market_value/1000,1))+" B";}var industry=entity.industry;if(typeof industry==="undefined"){overlay_template=overlay_template.replace(/.*\[INDUSTRY\].*/g,"");}overlay_template=overlay_template.replace(/\[COUNTRY\]/g,country);overlay_template=overlay_template.replace(/\[REVENUE\]/g,revenue);overlay_template=overlay_template.replace(/\[MARKET_VALUE\]/g,market_value);overlay_template=overlay_template.replace(/\[INDUSTRY\]/g,industry);}else{if("global2000"===_uri){var country=entity.country;if(typeof country==="undefined"){overlay_template=overlay_template.replace(/.*\[COUNTRY\].*/g,"");}var industry=entity.industry;if(typeof industry==="undefined"){overlay_template=overlay_template.replace(/.*\[INDUSTRY\].*/g,"");}var ceo=entity.ceo;if(typeof ceo==="undefined"){overlay_template=overlay_template.replace(/.*\[CEO\].*/g,"");}var market_value=entity.marketValue;if(typeof market_value==="undefined"){overlay_template=overlay_template.replace(/.*\[MARKET_VALUE\].*/g,"");}else{market_value="$$"+forbes.util.display_wealth(market_value,true,false);}overlay_template=overlay_template.replace(/\[COUNTRY\]/g,country);overlay_template=overlay_template.replace(/\[INDUSTRY\]/g,industry);overlay_template=overlay_template.replace(/\[CEO\]/g,ceo);overlay_template=overlay_template.replace(/\[MARKET_VALUE\]/g,market_value);}else{if("growth-companies"===_uri){var market_value=entity.marketValue;if(typeof market_value==="undefined"){overlay_template=overlay_template.replace(/.*\[MARKET_VALUE\].*/g,"");}else{market_value="$$"+forbes.util.display_wealth(market_value,true,false);}var income_change=entity.incomeChange;if(typeof income_change==="undefined"){overlay_template=overlay_template.replace(/.*\[INCOME_CHANGE\].*/g,"");}else{income_change=income_change+"%";}var ceo=entity.ceo;if(typeof ceo==="undefined"){overlay_template=overlay_template.replace(/.*\[CEO\].*/g,"");}var industry=entity.industry;if(typeof industry==="undefined"){overlay_template=overlay_template.replace(/.*\[INDUSTRY\].*/g,"");}var state=entity.state;var country=entity.country;var location="";if(typeof state==="undefined"&&typeof country==="undefined"){overlay_template=overlay_template.replace(/.*\[LOCATION\].*/g,"");}else{if(typeof state!=="undefined"){location=state;if(typeof country!=="undefined"){location+=", ";}}if(typeof country!=="undefined"){location+=country;}}overlay_template=overlay_template.replace(/\[MARKET_VALUE\]/g,market_value);overlay_template=overlay_template.replace(/\[INCOME_CHANGE\]/g,income_change);overlay_template=overlay_template.replace(/\[CEO\]/g,ceo);overlay_template=overlay_template.replace(/\[INDUSTRY\]/g,industry);overlay_template=overlay_template.replace(/\[LOCATION\]/g,location);}else{if("innovative-companies"===_uri){var industry=entity.industry;if(typeof industry==="undefined"){overlay_template=overlay_template.replace(/.*\[INDUSTRY\].*/g,"");}var country=entity.country;if(typeof country==="undefined"){overlay_template=overlay_template.replace(/.*\[COUNTRY\].*/g,"");}var innovation_premium=entity.innovationPremium;if(typeof innovation_premium==="undefined"){overlay_template=overlay_template.replace(/.*\[INNOVATION_PREMIUM\].*/g,"");}else{innovation_premium+="%";}var sales_growth=entity.salesGrowth;if(typeof sales_growth==="undefined"){overlay_template=overlay_template.replace(/.*\[FIVE_YEAR_SALES_GROWTH\].*/g,"");}else{sales_growth+="%";}overlay_template=overlay_template.replace(/\[INDUSTRY\]/g,industry);overlay_template=overlay_template.replace(/\[COUNTRY\]/g,country);overlay_template=overlay_template.replace(/\[INNOVATION_PREMIUM\]/g,innovation_premium);overlay_template=overlay_template.replace(/\[FIVE_YEAR_SALES_GROWTH\]/g,sales_growth);}else{if("most-promising-companies"===_uri){var ceo=entity.ceo;if(typeof ceo==="undefined"){overlay_template=overlay_template.replace(/.*\[CEO\].*/g,"");}var revenue=entity.revenue;if(typeof revenue==="undefined"){overlay_template=overlay_template.replace(/.*\[REVENUE\].*/g,"");}else{if(revenue<1000000){revenue="<span class='dollar'>$</span>"+number_format(entity.revenue);}else{revenue="<span class='dollar'>$</span>"+parseFloat(number_format(entity.revenue))+" M";}}var revenue_change=entity.revenueChange;if(typeof revenue_change==="undefined"){overlay_template=overlay_template.replace(/.*\[REVENUE_CHANGE\].*/g,"");}else{revenue_change=revenue_change+"%";}overlay_template=overlay_template.replace(/\[CEO\]/g,ceo);overlay_template=overlay_template.replace(/\[REVENUE\]/g,revenue);overlay_template=overlay_template.replace(/\[REVENUE_CHANGE\]/g,revenue_change);}else{if("powerful-brands"===_uri){var brand_value=entity.brandValue;if(typeof brand_value==="undefined"){overlay_template=overlay_template.replace(/.*\[BRAND_VALUE\].*/g,"");}else{brand_value="$$"+forbes.util.display_wealth(brand_value,true,false);}var one_year_change=entity.oneYearValueChange;if(typeof one_year_change==="undefined"){overlay_template=overlay_template.replace(/.*\[ONEYEARCHANGE\].*/g,"");}else{one_year_change=one_year_change+"%";}overlay_template=overlay_template.replace(/\[BRAND_VALUE\]/g,brand_value);overlay_template=overlay_template.replace(/\[ONEYEARCHANGE\]/g,one_year_change);}else{if("sports-agencies"===_uri){var clients=entity.clients;var clients_string="";if(typeof clients==="undefined"){overlay_template=overlay_template.replace(/.*\[CLIENTS\].*/g,"");}else{for(var i=0;i<clients.length;i++){var client=clients[i];if(client.name&&client.uri){if(clients_string!==""){clients_string+=", ";}clients_string+=clients[i].name;}}if(clients_string===""){overlay_template=overlay_template.replace(/.*\[CLIENTS\].*/g,"");}}var assets=entity.assets;if(typeof assets==="undefined"){overlay_template=overlay_template.replace(/.*\[ASSETS\].*/g,"");}else{assets="$$"+forbes.util.display_wealth(assets);}var revenue=entity.revenue;if(typeof revenue==="undefined"){overlay_template=overlay_template.replace(/.*\[REVENUE\].*/g,"");}else{revenue="$$"+forbes.util.display_wealth(revenue,false,false);}var description=entity.description;if(typeof description==="undefined"){overlay_template=overlay_template.replace(/.*\[DESCRIPTION\].*/g,"");}overlay_template=overlay_template.replace(/\[CLIENTS\]/g,clients_string);overlay_template=overlay_template.replace(/\[ASSETS\]/g,assets);overlay_template=overlay_template.replace(/\[REVENUE\]/g,revenue);overlay_template=overlay_template.replace(/\[DESCRIPTION\]/g,description);}else{if("nfl-valuations"===_uri){var value_list=entity.valueList;if(typeof value_list==="undefined"){overlay_template=overlay_template.replace(/.*\[VALUELIST\].*/g,"");}else{value_list="$$"+parseFloat(number_format(value_list/1000,2))+" B";}var owners=entity.owners;var owners_string;if(typeof owners==="undefined"){overlay_template=overlay_template.replace(/.*\[OWNER\].*/g,"");}else{owners_string="";for(var i=0;i<owners.length;i++){var owner=owners[i];if(owner.name){if(owners_string!==""){owners_string+=", ";}owners_string+=owner.name;}}}var revenue=entity.revenue;if(typeof revenue==="undefined"){overlay_template=overlay_template.replace(/.*\[REVENUE\].*/g,"");}else{revenue="$$"+forbes.util.format_money(revenue);}var operating_income=entity.operatingIncome;if(typeof operating_income==="undefined"){overlay_template=overlay_template.replace(/.*\[OPERATINGINCOME\].*/g,"");}else{operating_income="$$"+forbes.util.format_money(operating_income);}overlay_template=overlay_template.replace(/\[VALUELIST\]/g,value_list);overlay_template=overlay_template.replace(/\[OWNER\]/g,owners_string);overlay_template=overlay_template.replace(/\[REVENUE\]/g,revenue);overlay_template=overlay_template.replace(/\[OPERATINGINCOME\]/g,operating_income);}else{if("top-colleges"===_uri){var state=entity.state;if(typeof state==="undefined"){overlay_template=overlay_template.replace(/.*\[STATE\].*/g,"");}var cost=entity.cost;if(typeof cost==="undefined"){overlay_template=overlay_template.replace(/.*\[COST\].*/g,"");}else{cost="$"+number_format(cost);}var population=entity.population;if(typeof population==="undefined"){overlay_template=overlay_template.replace(/.*\[POPULATION\].*/g,"");}else{population=number_format(population);}var description=entity.description;if(typeof description==="undefined"){overlay_template=overlay_template.replace(/.*\[DESCRIPTION\].*/g,"");}overlay_template=overlay_template.replace(/\[STATE\]/g,state);overlay_template=overlay_template.replace(/\[COST\]/g,cost);overlay_template=overlay_template.replace(/\[POPULATION\]/g,population);overlay_template=overlay_template.replace(/\[DESCRIPTION\]/g,description);}else{if("business-schools"===_uri){var headquarters=entity.headquarters;if(typeof headquarters==="undefined"){overlay_template=overlay_template.replace(/.*\[HEADQUARTERS\].*/g,"");}var annual_enrollment=entity.annualEnrollment;if(typeof annual_enrollment==="undefined"){overlay_template=overlay_template.replace(/.*\[ANNUAL_ENROLLMENT\].*/g,"");}var median_gmat=entity.medianGmat;if(typeof median_gmat==="undefined"){overlay_template=overlay_template.replace(/.*\[MEDIAN_GMAT\].*/g,"");}var total_annual_cost=entity.totalAnnualCost;if(typeof median_gmat==="undefined"){overlay_template=overlay_template.replace(/.*\[TOTAL_ANNUAL_COST\].*/g,"");}else{total_annual_cost="$$"+number_format(total_annual_cost);}var mba_gain=entity.total5YearMbaGain;if(typeof mba_gain==="undefined"){overlay_template=overlay_template.replace(/.*\[TOTAL_5_YEAR_MBA_GAIN\].*/g,"");}else{mba_gain="$$"+number_format(mba_gain);}overlay_template=overlay_template.replace(/\[HEADQUARTERS\]/g,headquarters);overlay_template=overlay_template.replace(/\[ANNUAL_ENROLLMENT\]/g,annual_enrollment);overlay_template=overlay_template.replace(/\[MEDIAN_GMAT\]/g,median_gmat);overlay_template=overlay_template.replace(/\[TOTAL_ANNUAL_COST\]/g,total_annual_cost);overlay_template=overlay_template.replace(/\[TOTAL_5_YEAR_MBA_GAIN\]/g,mba_gain);}else{if("athletes"===_uri){var source=entity.source;if(typeof source==="undefined"){overlay_template=overlay_template.replace(/.*\[SOURCE\].*/g,"");}var salary=entity.salary;if(typeof salary==="undefined"){overlay_template=overlay_template.replace(/.*\[SALARY\].*/g,"");}else{salary="$$"+forbes.util.format_money(salary,false);}var country=entity.country;if(typeof country==="undefined"){overlay_template=overlay_template.replace(/.*\[COUNTRY\].*/g,"");}var endorsements=entity.endorsements;if(typeof endorsements==="undefined"){overlay_template=overlay_template.replace(/.*\[ENDORSEMENTS\].*/g,"");}else{endorsements="$$"+forbes.util.format_money(endorsements,false);}overlay_template=overlay_template.replace(/\[SOURCE\]/g,source);overlay_template=overlay_template.replace(/\[SALARY\]/g,salary);overlay_template=overlay_template.replace(/\[COUNTRY\]/g,country);overlay_template=overlay_template.replace(/\[ENDORSEMENTS\]/g,endorsements);}else{if("celebrities"===_uri){var category=entity.category;if(typeof category==="undefined"){overlay_template=overlay_template.replace(/.*\[CATEGORY\].*/g,"");}var country=entity.country;if(typeof country==="undefined"){overlay_template=overlay_template.replace(/.*\[COUNTRY\].*/g,"");}var earnings=entity.earnings;if(typeof earnings==="undefined"){overlay_template=overlay_template.replace(/.*\[EARNINGS\].*/g,"");}else{earnings=forbes.util.format_money(entity.earnings,"-","$");}overlay_template=overlay_template.replace(/\[CATEGORY\]/g,category);overlay_template=overlay_template.replace(/\[COUNTRY\]/g,country);overlay_template=overlay_template.replace(/\[EARNINGS\]/g,earnings);}else{if("families"===_uri||"asia-families"===_uri){var worth=entity.worth;if(typeof worth==="undefined"){overlay_template=overlay_template.replace(/.*\[WORTH\].*/g,"");}else{worth="<span class='dollar'>$</span>"+forbes.util.display_wealth(entity.worth,true,true,true);}var source=entity.source;if(typeof source==="undefined"){overlay_template=overlay_template.replace(/.*\[SOURCE\].*/g,"");}overlay_template=overlay_template.replace(/\[WORTH\]/g,worth);overlay_template=overlay_template.replace(/\[SOURCE\]/g,source);}else{if("midas"===_uri){var title=entity.title;if(typeof title==="undefined"){overlay_template=overlay_template.replace(/.*\[TITLE\].*/g,"");}var notable_deal=entity.notableDeal;if(typeof notable_deal==="undefined"){overlay_template=overlay_template.replace(/.*\[NOTABLEDEAL\].*/g,"");}var previous_rank=entity.previousRank;if(typeof previous_rank==="undefined"){overlay_template=overlay_template.replace(/.*\[PREVIOUS_RANK\].*/g,"");}else{previous_rank=(_year-1)+" Midas List Rank: "+previous_rank;}overlay_template=overlay_template.replace(/\[TITLE\]/g,title);overlay_template=overlay_template.replace(/\[NOTABLEDEAL\]/g,notable_deal);overlay_template=overlay_template.replace(/\[PREVIOUS_RANK\]/g,previous_rank);}else{if("power-women"===_uri){var title=entity.title;if(typeof title==="undefined"){overlay_template=overlay_template.replace(/.*\[TITLE\].*/g,"");}var government=entity.government;var country=entity.country;if(typeof country==="undefined"||government){overlay_template=overlay_template.replace(/.*\[COUNTRY\].*/g,"");}var category=entity.category;if(typeof category==="undefined"){overlay_template=overlay_template.replace(/.*\[CATEGORY\].*/g,"");}overlay_template=overlay_template.replace(/\[TITLE\]/g,title);overlay_template=overlay_template.replace(/\[COUNTRY\]/g,country);overlay_template=overlay_template.replace(/\[CATEGORY\]/g,category);}else{if("powerful-people"===_uri){var title=entity.title;if(typeof title==="undefined"){overlay_template=overlay_template.replace(/.*\[TITLE\].*/g,"");}overlay_template=overlay_template.replace(/\[TITLE\]/g,title);}else{if("self-made-women"===_uri){var title=entity.title;if(typeof title==="undefined"){overlay_template=overlay_template.replace(/.*\[TITLE\].*/g,"");}var worth=entity.worth;if(typeof worth==="undefined"){overlay_template=overlay_template.replace(/.*\[WORTH\].*/g,"");}else{worth="$$"+forbes.util.display_wealth(worth,true,false);}overlay_template=overlay_template.replace(/\[TITLE\]/g,title);overlay_template=overlay_template.replace(/\[WORTH\]/g,worth);}else{if("sports-agents"===_uri){var clients=entity.clients;var clients_string="";if(typeof clients==="undefined"){overlay_template=overlay_template.replace(/.*\[CLIENTS\].*/g,"");}else{for(var i=0;i<clients.length;i++){var client=clients[i];if(client.name&&client.uri){if(clients_string!==""){clients_string+=", ";}clients_string+=clients[i].name;}}if(clients_string===""){overlay_template=overlay_template.replace(/.*\[CLIENTS\].*/g,"");}}var management_assets=entity.managementAssets;if(typeof management_assets==="undefined"){overlay_template=overlay_template.replace(/.*\[MANAGEMENT_ASSETS\].*/g,"");}else{management_assets="$$"+forbes.util.display_wealth(management_assets);}var pay=entity.pay;if(typeof pay==="undefined"){overlay_template=overlay_template.replace(/.*\[PAY\].*/g,"");}else{pay="$$"+forbes.util.display_wealth(pay,false);}var description=entity.description;if(typeof description==="undefined"){overlay_template=overlay_template.replace(/.*\[DESCRIPTION\].*/g,"");}overlay_template=overlay_template.replace(/\[CLIENTS\]/g,clients_string);overlay_template=overlay_template.replace(/\[MANAGEMENT_ASSETS\]/g,management_assets);overlay_template=overlay_template.replace(/\[PAY\]/g,pay);overlay_template=overlay_template.replace(/\[DESCRIPTION\]/g,description);}else{if("billionaires"===_uri||"forbes-400"===_uri){if("realtime"===_version_tab){var primaryWorth=entity.realTimeWorth;if(typeof primaryWorth==="undefined"){overlay_template=overlay_template.replace(/.*\[PRIMARY_WORTH\].*/g,"");}else{primaryWorth="<span class='dollar'>$</span>"+forbes.util.display_wealth(entity.realTimeWorth,true,true);}}else{primaryWorth=entity.worth;if(typeof primaryWorth==="undefined"){overlay_template=overlay_template.replace(/.*\[PRIMARY_WORTH\].*/g,"");}else{primaryWorth="<span class='dollar'>$</span>"+forbes.util.display_wealth(entity.worth,true,true);}}var secondaryWorth=entity.realTimeWorth;if(typeof secondaryWorth==="undefined"){overlay_template=overlay_template.replace(/.*\[SECONDARY_WORTH\].*/g,"");}else{secondaryWorth="<span class='dollar'>$</span>"+forbes.util.display_wealth(entity.realTimeWorth,true,true);}var realTimeLink;if(typeof entity.realTimeWorth==="undefined"){overlay_template=overlay_template.replace(/.*\[REAL_TIME_LINK\].*/g,"");}else{realTimeLink="/"+_uri+"/list/#version:realtime";}var realTimeDate=entity.timestamp;if(typeof realTimeDate==="undefined"){overlay_template=overlay_template.replace(/.*\[REAL_TIME_DATE\].*/g,"");}else{realTimeDate=_make_date(entity.timestamp);}overlay_template=overlay_template.replace(/\[PRIMARY_WORTH\]/g,primaryWorth);overlay_template=overlay_template.replace(/\[SECONDARY_WORTH\]/g,secondaryWorth);overlay_template=overlay_template.replace(/\[REAL_TIME_LINK\]/g,realTimeLink);overlay_template=overlay_template.replace(/\[REAL_TIME_DATE\]/g,realTimeDate);}else{if("singapore-billionaires"===_uri){var worth=entity.worth;if(typeof worth==="undefined"){overlay_template=overlay_template.replace(/.*\[WORTH\].*/g,"");}else{worth="<span class='dollar'>$</span>"+forbes.util.display_wealth(worth,true,false);}var source=entity.source;if(typeof source==="undefined"){overlay_template=overlay_template.replace(/.*\[SOURCE\].*/g,"");}overlay_template=overlay_template.replace(/\[WORTH\]/g,worth);overlay_template=overlay_template.replace(/\[SOURCE\]/g,source);}else{if("forbes-400"===_uri||"hedge-fund-managers"===_uri||"richest-in-tech"===_uri||"africa-billionaires"===_uri||"australia-billionaires"===_uri||"china-billionaires"===_uri||"hong-kong-billionaires"===_uri||"india-billionaires"===_uri||"indonesia-billionaires"===_uri||"japan-billionaires"===_uri||"korea-billionaires"===_uri||"malaysia-billionaires"===_uri||"philippines-billionaires"===_uri||"taiwan-billionaires"===_uri||"thailand-billionaires"===_uri){var worth=entity.worth;if(typeof worth==="undefined"){overlay_template=overlay_template.replace(/.*\[WORTH\].*/g,"");}else{if(_uri==="forbes-400"){worth="<span class='dollar'>$</span>"+forbes.util.display_wealth(worth,true,true);}else{worth="<span class='dollar'>$</span>"+forbes.util.display_wealth(worth,true,false);}}overlay_template=overlay_template.replace(/\[WORTH\]/g,worth);}}}}}}}}}}}}}}}}}}}}}}}}overlay_template=overlay_template.replace("data-src","src");return overlay_template;}catch(e){debug("Error making overlay from template: ");debug(e);return"";}}function _hide_overlay(){_overlay_visible=false;$overlay.animate({opacity:0},500);$overlay.hide("slow");}function _load_overlay_ad(){if(_views_until_reload_overlay_ad>0){_views_until_reload_overlay_ad--;return;}if(!_overlay_ad_setup){_setup_overlay_ad();}else{googletag.pubads().refresh([_overlay_slot]);}_views_until_reload_overlay_ad=1;}function _setup_overlay_ad(){googletag.cmd.push(function(){_overlay_slot=googletag.defineSlot("/7175/fdc.forbes/"+_zone,[[728,90],[970,66],[970,250],[970,90],[1,1]],"profile").addService(googletag.pubads()).setTargeting("pos","profile");googletag.enableServices();});googletag.cmd.push(function(){googletag.display("profile");});_overlay_ad_setup=true;}function _init_history(){var hash_checker=function(){this.hash="";this.start();};$.extend(hash_checker.prototype,{save:function(hash){this.hash="#"+hash.replace(/%2E/g,"_2E").replace(/%2F/g,"_2F").replace(/%3F/g,"_3F");if(this.hash==="#"&&document.location.hash===""){return;}if(hash!==document.location.hash){document.location.hash=this.hash;}},parse:function(hash){var hash_pieces,version_tab,version_tab_field,$version_tab,page,$tab,active_tab,active_tab_field,active_tab_function,filter_values=[],$header,header,sort_reverse,search,sort,i,j;hash=hash.replace(/_2E/g,"%2E").replace(/_2F/g,"%2F").replace(/_3F/g,"%3F");try{hash_pieces=hash.substring(1).split("_");for(i=0;i<hash_pieces.length;i++){var key=hash_pieces[i].split(":")[0];var value=decodeURIComponent(hash_pieces[i].split(":")[1]);if("page"===key){page=parseInt(value);if(page<=0){page=1;}}else{if("version"===key){version_tab=value;$version_tabs.each(function(){var $this_version_tab=$(this);var this_version_value=$this_version_tab.data("value");if(this_version_value===version_tab){version_tab_field=$this_version_tab.data("field");sort=version_tab_field;$version_tab=$this_version_tab;}});}else{if("tab"===key){active_tab=value;$tabs.each(function(){var $this_tab=$(this);var this_value=$this_tab.data("value");if(this_value===active_tab){active_tab_field=$this_tab.data("field");active_tab_function=$this_tab.data("function");if(active_tab_function==="asc"||active_tab_function==="desc"){sort=$this_tab.data("field");}$tab=$this_tab;}});}else{if("header"===key){header=value;sort=header;$headers.each(function(){var $this_header=$(this);var this_value=$this_header.data("field");if(value===this_value){$header=$this_header;}});}else{if("sortreverse"===key){sort_reverse=value==="true"?true:false;}else{if("search"===key){search=value;}else{if("show"===key){_initial_real_time_scroll=true;}else{filter_values.push({field:key,value:value});}}}}}}}}}catch(e){debug("Error decoding hash: "+this.hash);debug(e);document.location.hash="";return;}if(typeof page!=="undefined"){_page=page;}if(typeof version_tab!=="undefined"){_version_tab=version_tab;}if(typeof version_tab_field!=="undefined"){_version_tab_field=version_tab_field;}if(typeof active_tab!=="undefined"&&typeof active_tab_field!=="undefined"&&typeof active_tab_function!=="undefined"){_active_tab=active_tab;_active_tab_field=active_tab_field;_active_tab_function=active_tab_function;}if(typeof sort!=="undefined"){_sort=sort;}if(typeof header!=="undefined"){_header=header;}if(typeof sort_reverse!=="undefined"){_sort_reverse=sort_reverse;}if(typeof search!=="undefined"){_search=search;}for(i=0;i<_filter_values.length;i++){for(j=0;j<filter_values.length;j++){if(_filter_values[i].field===filter_values[j].field){_filter_values[i].value=filter_values[j].value;}}}if(typeof $version_tab!=="undefined"){$version_tabs.removeClass("active");$version_tab.addClass("active");if(version_tab==="static"){$(".list-header-worth").hide();}else{$(".list-header-worth").show();}}if(typeof $tab!=="undefined"){$tabs.removeClass("active");$tab.addClass("active");}if(typeof $header!=="undefined"){$headers.removeClass("active");$headers.find("span").remove();$header.addClass("active");var direction;if(typeof sort_reverse==="undefined"){direction="down";}else{if(sort_reverse){direction="up";}else{direction="down";}}var arrow="<span class='"+direction+"'></span>";$header.append(arrow);}if(typeof search!=="undefined"){$list_search.val(search);}$filters.each(function(){var $this=$(this);var field=$this.find(".dropdown").data("field");for(i=0;i<_filter_values.length;i++){var filter=_filter_values[i];if(filter.field===field){var value=filter.value;if(value!==""&&value!=="All"){var $filter_selections=$this.find("ul ul li");$filter_selections.each(function(){var $this=$(this);if($this.find("a").attr("id")===value){$this.siblings().removeClass("active");$this.addClass("active");}});}}}});_calculate_matching_entities();},start:function(){var t=this;this.check_interval=setInterval(function(){t.check();},300);},stop:function(){clearInterval(this.check_interval);},check:function(){if(decodeURIComponent(document.location.hash)===decodeURIComponent(this.hash)){return;}this.stop();this.parse(document.location.hash);}});_handle_hash=new hash_checker();}function _init_full_list(){debug("_current_url_page "+_current_url_page+" "+_matching_entities.length);if(_current_url_page>1){if(_current_url_page*_profiles_between_pages>_matching_entities.length){_current_url_page=Math.floor(_matching_entities.length/_profiles_between_pages)+1;}debug("_current_url_page "+_current_url_page);var first_profile_on_page=(_profiles_between_pages*(_current_url_page-1));var profiles_needed=first_profile_on_page+10;debug("profiles_needed is "+profiles_needed);while(profiles_needed>_page*10&&_matching_entities.length>_page*10){_page++;debug("Paging "+_page);_display_entities();}_scroll_to_url_page(_current_url_page);setTimeout(function(){_scroll_handling_disabled=true;_scroll_to_url_page(_current_url_page);_scroll_handling_disabled=false;},1000);}else{if(_initial_real_time_scroll){_realtime_scroll_interval=setInterval(function(){var $scroll_to=$(".realtimescroll");_scroll_handling_disabled=true;forbes.util.scroll_to_obj($scroll_to,{callback:function(){_scroll_handling_disabled=false;}});},500);}}$(window).scroll(function(){if(!_scroll_handling_disabled){clearInterval(_realtime_scroll_interval);_handle_entity_scroll();_handle_history_scroll();}});window.onpopstate=function(event){if(event.state==null){return;}_scroll_handling_disabled=true;debug("Scroll handling disabled");_parse_url();_scroll_to_url_page(_current_url_page,function(){_scroll_handling_disabled=false;debug("Scroll handling enabled");});};}function _scroll_to_url_page(index,callback){debug("Scroll to page "+index);var first_profile_on_page=(_profiles_between_pages*(index-1));_scroll_to_profile(first_profile_on_page,callback);}function _scroll_to_profile(index,callback){var $element=$("#the_list #list-table-body tr.data").eq(index);debug("It is "+index+" "+$element.find(".rank").text());_adjust_scroll($element,100,callback);}function _adjust_scroll($element,tolerance,callback){debug("Pos "+forbes.util.is_node_visible($element).pos);if(forbes.util.is_node_visible($element).pos>tolerance){forbes.util.scroll_to_obj($element,{callback:function(){_adjust_scroll($element,tolerance,callback);}});}else{if(typeof callback==="function"){callback();}}}function _handle_entity_scroll(){var bottom_of_window=$(window).scrollTop()+$(window).height();var bottom_of_list=$("#the_list").offset().top+$("#the_list").height();if(bottom_of_window+100>bottom_of_list){if(_matching_entities.length>_page*10){_page++;_display_entities();}}}function _handle_history_scroll(){var pos=-1;var node_number=-1;$("#the_list #list-table-body tr.data").each(function(index){var node_visibility=forbes.util.is_node_visible($(this));if(node_visibility.is_in_view){if(pos==-1&&node_visibility.pos>pos){pos=node_visibility.pos;node_number=index;}}});var url_page_from_node=Math.floor(node_number/_profiles_between_pages)+1;if(url_page_from_node>0&&url_page_from_node!=_current_url_page){var url=_original_pathname;if(url_page_from_node>1){url+=url_page_from_node+"/";}url+=window.location.hash;debug("Changing page to "+url);_current_url_page=url_page_from_node;if(typeof history.pushState==="function"){history.pushState({url_page:url_page_from_node},url_page_from_node+"",url);}}}function _calculate_matching_entities(){var entity;if(_entities===null){debug("Can't calculate, no data");return;}if(_entities.length===0){if(_waiting_for_data){debug("Already waiting. Skipping.");return;}debug("Waiting for data");_waiting_for_data=true;setTimeout(function(){if(_waiting_for_data){_waiting_for_data=false;_calculate_matching_entities();}},1000);return;}_waiting_for_data=false;_matching_entities=[];var filter_matches=[];for(var i=0;i<_entities.length;i++){entity=_entities[i];if(_match_selections_before_filters(entity)){for(var j=0;j<_filter_values.length;j++){var current_field=_filter_values[j].field;var values=filter_matches[j]||[];var option=_get_filter_option(entity,current_field);if(option!==null&&typeof option==="string"){if($.inArray(option,values)===-1){values.push(option);}}else{if(option!==null&&typeof option==="object"){for(var k=0;k<option.length;k++){var one_option=option[k];if($.inArray(one_option,values)===-1){values.push(one_option);}}}}filter_matches[j]=values;}if(_match_remaining_selections(entity)){_matching_entities.push(entity);}}}_update_filters(filter_matches);_sort_matching_entities();}function _match_selections_before_filters(entity){if(_uri==="best-employers"){return _version_tab_match(entity)&&_header_match(entity)&&_search_match(entity);}else{return _version_tab_match(entity)&&_tab_match(entity)&&_header_match(entity)&&_search_match(entity);}}function _match_remaining_selections(entity){if(_uri==="best-employers"){return _tab_match(entity)&&_filter_match(entity);}else{return _filter_match(entity);}}function _sort_matching_entities(){_matching_entities.sort(_list_comparator);if(_sort_reverse){_matching_entities.reverse();}_display_entities();_update_pagination();_adjust_header_links();}function _list_comparator(a,b){var tie_breaker_field="position";var sort=_sort;if("realtime"===_version_tab){tie_breaker_field="realTimePosition";if(_sort==="position"){sort="realTimePosition";}else{if(_sort==="worth"){sort="realTimeWorth";}}}if(sort==="name"){return compare_two_fields("lastName","name");}else{return compare_fields(sort);}function compare_two_fields(primary_field,secondary_field){var field_comparison=compare_fields_no_tiebreaker(primary_field);if(field_comparison===0){field_comparison=compare_fields_no_tiebreaker(secondary_field);}if(field_comparison===0){field_comparison=a[tie_breaker_field]-b[tie_breaker_field];}return field_comparison;}function compare_fields(field){var field_comparison=compare_fields_no_tiebreaker(field);if(field_comparison===0){field_comparison=a[tie_breaker_field]-b[tie_breaker_field];}return field_comparison;}function compare_fields_no_tiebreaker(field){var a_field=a[field];var b_field=b[field];if(typeof a_field==="undefined"&&typeof b_field==="undefined"){return 0;}else{if(typeof a_field==="undefined"){return -1;}else{if(typeof b_field==="undefined"){return 1;}}}if(typeof a_field==="number"){return a_field-b_field;}var a_lower,b_lower;if($.isArray(a_field)){a_lower="";for(var i=0;i<a_field.length;i++){a_lower+=","+a_field[i];}b_lower="";for(var i=0;i<b_field.length;i++){b_lower+=","+b_field[i];}}else{a_lower=a_field;b_lower=b_field;}var a_lower=a_lower.toLowerCase();var b_lower=b_lower.toLowerCase();if(a_lower===b_lower){return 0;}else{if(a_lower<b_lower){return -1;}else{return 1;}}}}function _display_entities(){var entities_to_show=[],i=null;for(i=(_page-1)*10;i<_page*10&&i<_matching_entities.length;i++){entities_to_show.push(_matching_entities[i]);}if(_is_full_list){_display_full_list_entities(entities_to_show);}else{_display_lander_entities(entities_to_show);}}function _display_lander_entities(entities_to_show){var list_html,i;if(entities_to_show.length===0){list_html="";}else{list_html="<ul class='list_content'>";for(i=0;i<entities_to_show.length;i++){if(i===5){list_html+="</ul><ul class='list_content'>";}list_html+=_create_entity_html(entities_to_show[i]);}list_html+="</ul>";}$("#the_list div.overall").html(list_html);_update_hash();_initial_data_displayed=true;}function _display_full_list_entities(entities_to_show){var list_html,position,i;if(_page===1){$("#the_list tr.data").remove();$("#the_list tr.ad").remove();}for(i=0;i<entities_to_show.length;i++){list_html=_create_entity_html(entities_to_show[i]);position=(_page-1)*10+i;if(_is_ad_position(position)){var ad_number=_generate_ad_number(position);$("#the_list #list-table-body").append(_generate_ad(ad_number));_init_ad_position(ad_number);}$("#the_list #list-table-body").append(list_html);}_update_hash();if(!_initial_data_displayed){$("#preloader").hide();_init_full_list();}_initial_data_displayed=true;}function _update_hash(){if(!_initial_data_displayed){return;}var hash_value="",i;if(_version_tab!==null){hash_value=_add_to_hash(hash_value,"version",_version_tab);}if(_active_tab!==null){hash_value=_add_to_hash(hash_value,"tab",_active_tab);}if(_header!==null){hash_value=_add_to_hash(hash_value,"header",_header);}if(!_is_full_list&&_page!==1){hash_value=_add_to_hash(hash_value,"page",_page);}if(_sort_reverse){hash_value=_add_to_hash(hash_value,"sortreverse",_sort_reverse);}if(_search!==""){hash_value=_add_to_hash(hash_value,"search",encodeURIComponent(_search));}for(i=0;i<_filter_values.length;i++){if(_filter_values[i].value!=="All"){hash_value=_add_to_hash(hash_value,_filter_values[i].field,encodeURIComponent(_filter_values[i].value));}}if(""===hash_value){hash_value=_add_to_hash(hash_value,"tab","overall");}_handle_hash.save(hash_value);}function _is_ad_position(position){if((typeof history.pushState!=="function")&&(position/_profiles_between_ads)>_old_browser_ad_limit){return false;}else{return position!=0&&position%_profiles_between_ads==0;}}function _generate_ad_number(position){return(Math.round(position/_profiles_between_ads));}function _generate_ad(number){var ad_id="topx_"+number;return'<tr class="ad"><td class="ad lazy_ad" colspan="'+_list_colspan+'" id="'+ad_id+'"></td></tr>';}function _init_ad_position(number){if(typeof _full_list_ad_slots[number]==="undefined"){var ad_id="topx_"+number;googletag.cmd.push(function(){_full_list_ad_slots[number]=googletag.defineSlot("/7175/fdc.forbes/"+_zone,[[728,90],[970,66],[970,250],[970,90],[1,1]],ad_id).addService(googletag.pubads()).setTargeting("pos","topx").setTargeting("topx",number);googletag.enableServices();});forbes.lazy_ad.init_scroll_check(ad_id);}else{googletag.pubads().refresh([_full_list_ad_slots[number]]);}}function _add_to_hash(hash,field,value){if(hash.length!==0){hash+="_";}hash+=field+":"+value;return hash;}function _create_entity_html(entity){var entity_template=_entity_template;entity_template=entity_template.replace(/<br>/gi,"\r\n");var uri_link=_make_entity_uri_link(entity);var image_type=_make_image_type(entity);if("billionaires"===_uri||"forbes-400"===_uri){if("realtime"===_version_tab){entity_template=entity_template.replace(/\[WORTH\]/g,"[REAL_TIME_WORTH]");entity_template=entity_template.replace(/\[RANK\]/g,"[REAL_TIME_RANK]");}else{entity_template=entity_template.replace(/.*\[CHANGE_AMOUNT\].*/g,"");}}var rank="";if(typeof entity.rank!=="undefined"){rank="#"+entity.rank+" ";}var real_time_rank="";if(typeof entity.realTimeRank!=="undefined"){real_time_rank="#"+entity.realTimeRank+" ";}var worth;if(typeof entity.worth==="undefined"){worth="-";if(_is_full_list){}else{entity_template=entity_template.replace(/.*\[WORTH\].*/g,"");}}else{if(_uri==="rtrl"||_uri==="forbes-400"||"billionaires"===_uri||"families"===_uri||"asia-families"===_uri){worth="$"+forbes.util.display_wealth(entity.worth,true,true);}else{worth="$"+forbes.util.display_wealth(entity.worth,true,false);}}var archivedWorth;if(typeof entity.archivedWorth==="undefined"){if(_uri==="rtrl"){if(_is_full_list){archivedWorth="n/a";}else{entity_template=entity_template.replace(/.*\[ARCHIVED_WORTH\].*/g,"");entity_template=entity_template.replace(/.*static-date.*/g,"");entity_template=entity_template.replace('class="real-time','class="real-time no-after');}}else{archivedWorth="n/a";}}else{if(_uri==="rtrl"||_uri==="forbes-400"||"billionaires"===_uri){archivedWorth="$"+forbes.util.display_wealth(entity.archivedWorth,true,true);}else{archivedWorth="$"+forbes.util.display_wealth(entity.archivedWorth,true,false);}}var age=entity.age;if(typeof entity.age==="undefined"){age="-";if(_is_full_list){}else{entity_template=entity_template.replace(/.*\[AGE\].*/g,"");}}var country=entity.country;if(typeof entity.country==="undefined"){country="-";if(_is_full_list){}else{entity_template=entity_template.replace(/.*\[COUNTRY\].*/g,"");}}var source=entity.source;if(typeof entity.source==="undefined"){source=entity.source;if(_is_full_list){}else{entity_template=entity_template.replace(/.*\[SOURCE\].*/g,"");}}var title=entity.title;if(typeof entity.title==="undefined"){title="-";if(_is_full_list){}else{entity_template=entity_template.replace(/.*\[TITLE\].*/g,"");}}var category=entity.category;if(typeof entity.category==="undefined"){category="-";if(_is_full_list){}else{entity_template=entity_template.replace(/.*\[CATEGORY\].*/g,"");}}var organization=entity.organization;if(typeof entity.organization==="undefined"){organization="-";if(_is_full_list){}else{entity_template=entity_template.replace(/.*\[ORGANIZATION\].*/g,"");}}var notableDeal=entity.notableDeal;if(typeof entity.notableDeal==="undefined"){notableDeal="-";if(_is_full_list){}else{entity_template=entity_template.replace(/.*\[NOTABLEDEAL\].*/g,"");}}var real_time_worth;if(typeof entity.realTimeWorth==="undefined"){if(_is_full_list){}else{entity_template=entity_template.replace(/.*\[REAL_TIME_WORTH\].*/g,"");}}else{real_time_worth="$"+forbes.util.display_wealth(entity.realTimeWorth,true);}if(_uri==="most-promising-companies"){var revenue;if(typeof entity.revenue==="undefined"){if(_is_full_list){}else{entity_template=entity_template.replace(/.*\[REVENUE\].*/g,"");}}else{if(revenue<1000000){revenue="$"+number_format(entity.revenue);}else{revenue="$"+parseFloat(number_format(entity.revenue))+" M";}}}var pay=entity.pay;if(typeof entity.pay==="undefined"){pay="-";if(_is_full_list){}else{entity_template=entity_template.replace(/.*\[PAY\].*/g,"");}}var state=entity.state;if(typeof entity.state==="undefined"){state="-";if(_is_full_list){}else{entity_template=entity_template.replace(/.*\[STATE\].*/g,"");}}var industry=entity.industry;if(typeof entity.industry==="undefined"){industry="-";if(_is_full_list){}else{entity_template=entity_template.replace(/.*\[INDUSTRY\].*/g,"");}}var industry_array=entity.industries;var industries;if(typeof entity.industries==="undefined"){industries="-";if(_is_full_list){}else{entity_template=entity_template.replace(/.*\[INDUSTRIES\].*/g,"");}}else{industries="";for(var i=0;i<industry_array.length;i++){if(i!==0){industries+="; ";}industries+=industry_array[i];}}var employees=entity.employees;if(typeof entity.employees==="undefined"){employees="-";if(_is_full_list){}else{entity_template=entity_template.replace(/.*\[EMPLOYEES\].*/g,"");}}var sales_growth=entity.salesGrowth;if(typeof entity.salesGrowth==="undefined"){sales_growth="-";if(_is_full_list){}else{entity_template=entity_template.replace(/.*\[SALES_GROWTH\].*/g,"");}}else{sales_growth=sales_growth+"%";}var income_change=entity.incomeChange;if(typeof entity.incomeChange==="undefined"){income_change="-";if(_is_full_list){}else{entity_template=entity_template.replace(/.*\[INCOME_CHANGE\].*/g,"");}}else{income_change=income_change+"%";}var innovation_premium=entity.innovationPremium;if(typeof entity.innovationPremium==="undefined"){innovation_premium="-";if(_is_full_list){}else{entity_template=entity_template.replace(/.*\[INNOVATION_PREMIUM\].*/g,"");}}else{innovation_premium=innovation_premium+"%";}var cost=entity.cost;if(typeof entity.cost==="undefined"){cost="-";if(_is_full_list){}else{entity_template=entity_template.replace(/.*\[COST\].*/g,"");}}else{cost="$"+number_format(cost);}var population=entity.population;if(typeof entity.population==="undefined"){population="-";if(_is_full_list){}else{entity_template=entity_template.replace(/.*\[POPULATION\].*/g,"");}}else{population=number_format(population);}if(_uri==="growth-companies"){var market_value=entity.marketValue;if(typeof entity.marketValue==="undefined"){market_value="-";if(_is_full_list){}else{entity_template=entity_template.replace(/.*\[MARKET_VALUE\].*/g,"");}}else{market_value="$"+forbes.util.display_wealth(market_value,true,false);}}var stateAbbr=entity.stateAbbr;if(_uri==="global2000"){var revenue=entity.revenue;if(typeof entity.revenue==="undefined"){if(_is_full_list){}else{entity_template=entity_template.replace(/.*\[REVENUE\].*/g,"");}}else{revenue="$"+forbes.util.display_wealth(revenue,true,false);}var profits=entity.profits;if(typeof profits==="undefined"){profits="-";if(_is_full_list){}else{entity_template=entity_template.replace(/.*\[PROFITS\].*/g,"");}}else{profits="$"+forbes.util.display_wealth(profits,true,false);}var assets=entity.assets;if(typeof assets==="undefined"){assets="-";if(_is_full_list){}else{entity_template=entity_template.replace(/.*\[ASSETS\].*/g,"");}}else{assets="$"+forbes.util.display_wealth(assets,true,false);}var market_value=entity.marketValue;if(typeof market_value==="undefined"){market_value="-";if(_is_full_list){}else{entity_template=entity_template.replace(/.*\[MARKET_VALUE\].*/g,"");}}else{market_value="$"+forbes.util.display_wealth(market_value,true,false);}}var brand_value=entity.brandValue;if(typeof brand_value==="undefined"){brand_value="-";if(_is_full_list){}else{entity_template=entity_template.replace(/.*\[BRAND_VALUE\].*/g,"");}}else{brand_value="$"+forbes.util.display_wealth(brand_value,true,false);}var one_year_change=entity.oneYearValueChange;if(typeof one_year_change==="undefined"){one_year_change="-";if(_is_full_list){}else{entity_template=entity_template.replace(/.*\[ONEYEARCHANGE\].*/g,"");}}else{one_year_change=one_year_change+"%";}var value_list=entity.valueList;if(typeof value_list==="undefined"){value_list="-";if(_is_full_list){}else{entity_template=entity_template.replace(/.*\[VALUELIST\].*/g,"");}}else{value_list="$$"+parseFloat(number_format(value_list/1000,2))+" B";}var debt_value=entity.debtValue;if(typeof debt_value==="undefined"){debt_value="-";if(_is_full_list){}else{entity_template=entity_template.replace(/.*\[DEBTVALUE\].*/g,"");}}else{debt_value+="%";}if(_uri==="nfl-valuations"){var revenue=entity.revenue;if(typeof entity.revenue==="undefined"){if(_is_full_list){revenue="-";}else{entity_template=entity_template.replace(/.*\[REVENUE\].*/g,"");}}else{revenue="$$"+forbes.util.format_money(revenue);}}var operating_income=entity.operatingIncome;if(typeof operating_income==="undefined"){operating_income="-";if(_is_full_list){}else{entity_template=entity_template.replace(/.*\[OPERATINGINCOME\].*/g,"");}}else{operating_income="$$"+forbes.util.format_money(operating_income);}var advertising=entity.advertising;if(typeof advertising==="undefined"){advertising="-";if(_is_full_list){}else{entity_template=entity_template.replace(/.*\[ADVERTISING\].*/g,"");}}else{advertising="$"+forbes.util.display_wealth(advertising,true,false);}if(_uri==="powerful-brands"){var revenue=entity.revenue;if(typeof entity.revenue==="undefined"){if(_is_full_list){revenue="-";}else{entity_template=entity_template.replace(/.*\[REVENUE\].*/g,"");}}else{revenue="$"+forbes.util.display_wealth(revenue,true,false);}}var members=forbes.util.display_estimated_number(entity.numberOfSiblings,entity.numberOfSiblingsEst,""," (EST.)");var net_income=entity.netIncome;if(typeof entity.netIncome==="undefined"){if(_is_full_list){net_income="-";}else{entity_template=entity_template.replace(/.*\[NET_INCOME\].*/g,"");}}if(_uri==="asia200"){var revenue=entity.revenue;if(typeof entity.revenue==="undefined"){if(_is_full_list){}else{entity_template=entity_template.replace(/.*\[REVENUE\].*/g,"");}}else{revenue=remove_trailing_zeros(number_format(revenue,0));}var market_value=entity.marketValue;if(typeof market_value==="undefined"){market_value="-";if(_is_full_list){}else{entity_template=entity_template.replace(/.*\[MARKET_VALUE\].*/g,"");}}else{market_value=remove_trailing_zeros(number_format(market_value,0));}}var cost_of_doing_business=entity.costOfDoingBusiness;if(typeof entity.costOfDoingBusiness==="undefined"){if(_is_full_list){}else{entity_template=entity_template.replace(/.*\[COST_OF_BUSINESS\].*/g,"");}}var job_growth=entity.jobGrowth;if(typeof entity.jobGrowth==="undefined"){if(_is_full_list){}else{entity_template=entity_template.replace(/.*\[JOB_GROWTH\].*/g,"");}}var education=entity.education;if(typeof entity.education==="undefined"){if(_is_full_list){}else{entity_template=entity_template.replace(/.*\[EDUCATION\].*/g,"");}}var population=entity.population;if(typeof entity.population==="undefined"){if(_is_full_list){}else{entity_template=entity_template.replace(/.*\[POPULATION\].*/g,"");}}else{population=number_format(population);}if(_uri==="fab50"){var revenue=entity.revenue;if(typeof entity.revenue==="undefined"){if(_is_full_list){revenue="-";}else{entity_template=entity_template.replace(/.*\[REVENUE\].*/g,"");}}else{revenue="$"+remove_trailing_zeros(number_format(revenue/1000,1))+" B";}var market_value=entity.marketValue;if(typeof market_value==="undefined"){market_value="-";if(_is_full_list){}else{entity_template=entity_template.replace(/.*\[MARKET_VALUE\].*/g,"");}}else{market_value="$"+remove_trailing_zeros(number_format(market_value/1000,1))+" B";}}if("sports-agencies"===_uri){var revenue=entity.revenue;if(typeof entity.revenue==="undefined"){if(_is_full_list){}else{entity_template=entity_template.replace(/.*\[REVENUE\].*/g,"");}}else{revenue="$$"+forbes.util.display_wealth(revenue,false,false);}var assets=entity.assets;if(typeof assets==="undefined"){assets="-";if(_is_full_list){}else{entity_template=entity_template.replace(/.*\[ASSETS\].*/g,"");}}else{assets="$$"+forbes.util.display_wealth(assets);}}var years_to_payback=entity.yearsToPayback;if(typeof years_to_payback==="undefined"){years_to_payback="-";if(_is_full_list){}else{entity_template=entity_template.replace(/.*\[YEARS_TO_PAYBACK\].*/g,"");}}else{years_to_payback=number_format(years_to_payback);}var management_assets=entity.managementAssets;if(typeof management_assets==="undefined"){management_assets="-";if(_is_full_list){}else{entity_template=entity_template.replace(/.*\[MANAGEMENT_ASSETS\].*/g,"");}}else{management_assets="$$"+forbes.util.display_wealth(management_assets);}var return_on_equity=entity.returnOnEquity;if(typeof return_on_equity==="undefined"){return_on_equity="-";if(_is_full_list){}else{entity_template=entity_template.replace(/.*\[RETURN_ON_EQUITY\].*/g,"");}}else{return_on_equity+="%";}var total5YearMbaGain=entity.total5YearMbaGain;if(typeof total5YearMbaGain==="undefined"){total5YearMbaGain="-";if(_is_full_list){}else{entity_template=entity_template.replace(/.*\[TOTAL_5_YEAR_MBA_GAIN\].*/g,"");}}else{total5YearMbaGain="$$"+forbes.util.format_money(total5YearMbaGain/1000000);}var preMbaSalary=entity.preMbaSalary;if(typeof preMbaSalary==="undefined"){preMbaSalary="-";if(_is_full_list){}else{entity_template=entity_template.replace(/.*\[PRE_MBA_SALARY\].*/g,"");}}else{preMbaSalary="$$"+forbes.util.format_money(preMbaSalary/1000000);}var total_annual_cost=entity.totalAnnualCost;if(typeof total_annual_cost==="undefined"){total_annual_cost="-";if(_is_full_list){}else{entity_template=entity_template.replace(/.*\[TOTAL_ANNUAL_COST\].*/g,"");}}else{total_annual_cost="$$"+number_format(total_annual_cost/1000)+"&nbsp;K";}var median_gmat=entity.medianGmat;if(typeof median_gmat==="undefined"){median_gmat="-";if(_is_full_list){}else{entity_template=entity_template.replace(/.*\[MEDIAN_GMAT\].*/g,"");}}if("athletes"===_uri){var salary=entity.salary;if(typeof salary==="undefined"){salary="-";if(_is_full_list){}else{entity_template=entity_template.replace(/.*\[SALARY\].*/g,"");}}else{salary="$$"+forbes.util.format_money(entity.salary,false);}}if("business-schools"===_uri||"best-foreign-business-schools-1"===_uri||"best-foreign-business-schools-2"===_uri){var salary=entity.salary;if(typeof salary==="undefined"){salary="-";if(_is_full_list){}else{entity_template=entity_template.replace(/.*\[SALARY\].*/g,"");}}else{salary="$$"+forbes.util.format_money(salary/1000000);}}var change_direction,change_amount,change_percent;if(typeof entity.worthChange==="undefined"||typeof entity.realTimeWorth==="undefined"||typeof entity.timestamp==="undefined"){entity_template=entity_template.replace(/.*\[CHANGE_AMOUNT\].*/g,"");}else{var change_amount=Math.abs(entity.worthChange);var change_magnitude;if(Math.round(change_amount)>=1000){change_amount=parseFloat(number_format(change_amount/1000,1));change_magnitude=" B";}else{if(Math.round(change_amount)>=1){change_amount=parseFloat(number_format(change_amount));change_magnitude=" M";}else{change_amount=0;change_magnitude="";}}if(change_amount===0){change_direction="no_change";}else{if(entity.worthChange>0){change_direction="up";}else{if(entity.worthChange<0){change_direction="down";}}}if(change_amount===0){entity_template=entity_template.replace(/\[CHANGE_PERCENT\]/g,"");}else{change_percent=entity.worthChange/(entity.realTimeWorth-entity.worthChange)*100;change_percent=number_format(change_percent,1);change_percent=parseFloat(change_percent);if(change_percent===0){entity_template=entity_template.replace(/\[CHANGE_PERCENT\]/g,"");}else{change_percent="| "+change_percent.toString()+"%";}}change_amount="$$"+change_amount+change_magnitude;}try{if(entity.thumbnail){var dimensions=entity_template.match(/data-src="[^"'>]*\[IMAGE_URI\]_(\d+)x(\d+)[^"'>]/);entity_template=entity_template.replace(/data-src="[^"'>]*\[IMAGE_URI\][^"'>]*"/g,'data-src="'+forbes.util.make_image_link(entity.thumbnail,dimensions[1]*2,dimensions[1]*2)+'"');}else{entity_template=entity_template.replace(/\[IMAGE_TYPE\]/g,image_type);entity_template=entity_template.replace(/\[IMAGE_URI\]/g,entity.imageUri);}entity_template=entity_template.replace(/\[URI\]/g,entity.uri);entity_template=entity_template.replace(/\[LINK\]/g,uri_link);entity_template=entity_template.replace(/\[RANK\]/g,rank);entity_template=entity_template.replace(/\[REAL_TIME_RANK\]/g,real_time_rank);entity_template=entity_template.replace(/\[NAME\]/g,entity.name);entity_template=entity_template.replace(/\[WORTH\]/g,worth);entity_template=entity_template.replace(/\[AGE\]/g,age);entity_template=entity_template.replace(/\[SOURCE\]/g,forbes.util.dash_or_value(source));entity_template=entity_template.replace(/\[NOTABLEDEAL\]/g,notableDeal);entity_template=entity_template.replace(/\[COUNTRY\]/g,country);entity_template=entity_template.replace(/\[TITLE\]/g,title);entity_template=entity_template.replace(/\[CATEGORY\]/g,category);entity_template=entity_template.replace(/\[ORGANIZATION\]/g,organization);entity_template=entity_template.replace(/\[CHANGE_DIRECTION\]/g,change_direction);entity_template=entity_template.replace(/\[CHANGE_AMOUNT\]/g,change_amount);entity_template=entity_template.replace(/\[CHANGE_PERCENT\]/g,change_percent);entity_template=entity_template.replace(/\[ARCHIVED_WORTH\]/g,archivedWorth);entity_template=entity_template.replace(/\[PAY\]/g,"$$"+forbes.util.display_wealth(pay,false));entity_template=entity_template.replace(/\[SALARY\]/g,salary);entity_template=entity_template.replace(/\[ENDORSEMENTS\]/g,"$$"+forbes.util.format_money(entity.endorsements,false));entity_template=entity_template.replace(/\[SPORT\]/g,forbes.util.dash_or_value(entity.source));entity_template=entity_template.replace(/\[EARNINGS\]/g,forbes.util.format_money(entity.earnings,"-","$"));entity_template=entity_template.replace(/\[CATEGORY\]/g,forbes.util.dash_or_value(entity.category));entity_template=entity_template.replace(/\[MEMBERS\]/g,forbes.util.dash_or_value(members));entity_template=entity_template.replace(/\[HEADQUARTERS\]/g,forbes.util.dash_or_value(entity.headquarters));entity_template=entity_template.replace(/\[REAL_TIME_WORTH\]/g,real_time_worth);entity_template=entity_template.replace(/\[STATE\]/g,state);entity_template=entity_template.replace(/\[INDUSTRY\]/g,industry);entity_template=entity_template.replace(/\[EMPLOYEES\]/g,employees);entity_template=entity_template.replace(/\[REVENUE\]/g,revenue);entity_template=entity_template.replace(/\[PROFITS\]/g,profits);entity_template=entity_template.replace(/\[ASSETS\]/g,assets);entity_template=entity_template.replace(/\[MARKET_VALUE\]/g,market_value);entity_template=entity_template.replace(/\[BRAND_VALUE\]/g,brand_value);entity_template=entity_template.replace(/\[ONEYEARCHANGE\]/g,one_year_change);entity_template=entity_template.replace(/\[ADVERTISING\]/g,advertising);entity_template=entity_template.replace(/\[INDUSTRIES\]/g,industries);entity_template=entity_template.replace(/\[STATEABBR\]/g,stateAbbr);entity_template=entity_template.replace(/\[SALES_GROWTH\]/g,sales_growth);entity_template=entity_template.replace(/\[INCOME_CHANGE\]/g,income_change);entity_template=entity_template.replace(/\[INNOVATION_PREMIUM\]/g,innovation_premium);entity_template=entity_template.replace(/\[NET_INCOME\]/g,net_income);entity_template=entity_template.replace(/\[COST_OF_BUSINESS\]/g,cost_of_doing_business);entity_template=entity_template.replace(/\[JOB_GROWTH\]/g,job_growth);entity_template=entity_template.replace(/\[EDUCATION\]/g,education);entity_template=entity_template.replace(/\[VALUELIST\]/g,value_list);entity_template=entity_template.replace(/\[OPERATINGINCOME\]/g,operating_income);entity_template=entity_template.replace(/\[DEBTVALUE\]/g,debt_value);entity_template=entity_template.replace(/\[COST\]/g,cost);entity_template=entity_template.replace(/\[POPULATION\]/g,population);entity_template=entity_template.replace(/\[RETURN_ON_EQUITY\]/g,return_on_equity);entity_template=entity_template.replace(/\[MANAGEMENT_ASSETS\]/g,management_assets);entity_template=entity_template.replace(/\[YEARS_TO_PAYBACK\]/g,years_to_payback);entity_template=entity_template.replace(/\[TOTAL_5_YEAR_MBA_GAIN\]/g,total5YearMbaGain);entity_template=entity_template.replace(/\[PRE_MBA_SALARY\]/g,preMbaSalary);entity_template=entity_template.replace(/\[TOTAL_ANNUAL_COST\]/g,total_annual_cost);entity_template=entity_template.replace(/\[MEDIAN_GMAT\]/g,median_gmat);entity_template=entity_template.replace("data-src","src");return entity_template;}catch(e){debug("Error making entity from template: ");debug(e);return"";}}function _make_date(timestamp){var time=new Date(timestamp);var display_time=time.getMonth()+1+"/";display_time+=time.getDate()+"/";display_time+=time.getFullYear();return display_time;}function _update_pagination(){var last_page=Math.ceil(_matching_entities.length/10);if(_page===1){$prev.addClass("inactive");}else{$prev.removeClass("inactive");}if(_page===last_page){$next.addClass("inactive");}else{$next.removeClass("inactive");}}function _adjust_header_links(){if(_is_full_list){if("static"===_version_tab){$(".header_static_link").addClass("active");$(".header_realtime_link").removeClass("active");}else{if("realtime"===_version_tab){$(".header_realtime_link").addClass("active");$(".header_static_link").removeClass("active");}}}}function _version_tab_match(entity){if(_version_tab_field===null){return true;}return typeof entity[_version_tab_field]!=="undefined";}function _tab_match(entity){var tab_function;if(_active_tab===null){return true;}if(_active_tab_function==="asc"||_active_tab_function==="desc"){return typeof entity[_active_tab_field]!=="undefined";}if(typeof _active_tab_function!=="undefined"){tab_function=_active_tab_function.split(":")[1];}if(tab_function==="F"){return"F"===entity.gender;}else{if("West"===tab_function||"Midwest"===tab_function||"Northeast"===tab_function||"South"===tab_function){return tab_function===entity.residenceStateRegion;}else{if("retail"===tab_function||"auto"===tab_function||"biotech"===tab_function||"banking"===tab_function){if(typeof entity.industries==="undefined"){return false;}var field_value;if("retail"===tab_function){field_value="Retail & Wholesale";}else{if("auto"===tab_function){field_value="Automotive";}else{if("biotech"===tab_function){field_value="Drugs & Biotechnology";}else{field_value="Banking & Financial Services";}}}for(var i=0;i<entity.industries.length;i++){if(entity.industries[i]===field_value){return true;}}return false;}}}return true;}function _header_match(entity){if(_header===null){return true;}var field_to_match=_header;if("realtime"===_version_tab){if(_sort==="position"){field_to_match="realTimePosition";}else{if(_sort==="worth"){field_to_match="realTimeWorth";}}}return typeof entity[field_to_match]!=="undefined";}function _search_match(entity){if(_search===""){return true;}var escaped_search=_search.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&").toLowerCase();escaped_search=remove_diacritics(escaped_search);var regex=new RegExp(escaped_search);for(var i=0;i<_search_fields.length;i++){var field_to_search=entity[_search_fields[i]];if(typeof field_to_search!=="undefined"){field_to_search=field_to_search.toLowerCase();field_to_search=remove_diacritics(field_to_search);if(regex.test(field_to_search)){return true;}}}return false;}function _filter_match(entity){var field,value,matched_current_filter,matched_all_filters=true;for(var i=0;i<_filter_values.length;i++){field=_filter_values[i].field;value=_filter_values[i].value;matched_current_filter=false;if(value==="All"){matched_current_filter=true;}else{if(typeof entity[field]==="string"){if(value===entity[field]){matched_current_filter=true;}}else{if(typeof entity[field]!=="undefined"){for(var j=0;j<entity[field].length;j++){if(value===entity[field][j]){matched_current_filter=true;}}}}}if(!matched_current_filter){matched_all_filters=false;break;}}return matched_all_filters;}function _update_filters(filter_matches){$filters.each(function(i){var selected_value;selected_value=_filter_values[i].value;var $options=$(this).find("ul ul li");$options.each(function(j){var $option=$(this);var option_value=$option.find("a").attr("id");var all_option_is_selected=(option_value==="All");var option_has_matching_entities=$.inArray(option_value,filter_matches[i])!==-1;if(all_option_is_selected||option_has_matching_entities){$option.removeClass("disabled");}else{$option.addClass("disabled");}});});}function _get_filter_option(entity,current_field){var field,value,option_value,i;for(i=0;i<_filter_values.length;i++){field=_filter_values[i].field;value=_filter_values[i].value;if(field===current_field){option_value=entity[field];}else{if(value!=="All"&&entity[field]!==value){return null;}}}return option_value;}function _make_entity_uri_link(entity){var subtype;if(typeof entity.subtype!=="undefined"){subtype=entity.subtype;}else{subtype=_subtype;}var type_segment;if("person"===subtype){type_segment="profile";}else{if("place"===subtype){type_segment="places";}else{if("company"===subtype){type_segment="companies";}else{if("team"===subtype){type_segment="teams";}else{if("college"===subtype){type_segment="colleges";}}}}}var uri="/"+type_segment+"/"+entity.uri+"/";if("person"===_type||("best-employers"===_uri&&"college"===subtype)){if("realtime"===_version_tab){uri+="?list=rtb";}else{uri+="?list="+_uri;}}return uri;}function _make_image_type(entity){var subtype;if(typeof entity.subtype!=="undefined"){subtype=entity.subtype;}else{subtype=_subtype;}var image_type;if("person"===subtype){image_type="people";}else{if("place"===subtype){image_type="places";}else{if("company"===subtype){image_type="companies";}else{if("team"===subtype){image_type="teams";}else{if("college"===subtype){image_type="colleges";}}}}}return image_type;}function _debug(){var load_status;if(_entities===null){load_status="failed";}else{if(_entities.length===0){load_status="not loaded yet, or no data";}else{load_status="loaded";}}debug("year: "+_year);debug("uri: "+_uri);debug("type: "+_type);debug("subtype: "+_subtype);debug("page type: "+(_is_full_list?"full list":"lander"));debug("loading status: "+load_status);if(load_status==="loaded"){debug("total entities: "+_entities.length);debug("total matching: "+_matching_entities.length);}}return{init:_init,debug:_debug};}($));return app;}(forbes||{},jQuery));forbes.bootstrap.register(forbes.lander.init);var forbes=(function(app,$){app.sharing=(function($){var _mode="",_initialized=false,_parent_selector="#contentwrapper",_container_selector="section#abovefold,#content",_sharethis_publisher_id=null,_sharethis_url_to_share=null,_sharethis_native_count=false,_sharethis_interval=null,_sharethis_poll_delay=80,_margin_top=100,_margin_bottom=170;function _init(){if($("#sticky_sharing").length<1){return false;}_init_sharethis();}function _init_sharethis(){$("#sticky_sharing").show();if(!$.browser.msie){$("#sticky_sharing").css("opacity",0.1).stop().animate({opacity:1},{duration:400,easing:"easeInOutCubic"});}$(window).scroll(function(){_on_scroll();});_on_scroll();$(window).resize(function(){_on_window_resize();});_on_window_resize();}function _on_window_resize(){var win_width=$(window).width();var content_width=$(_container_selector).width();content_width+=20*2;if(((win_width-content_width)/2)<(parseInt($("#sticky_sharing").css("width"))+30)){}else{var left_margin=(((((win_width-content_width)/2)-$("#sticky_sharing").width())/2)+8);$("#sticky_sharing .position_reference").css("margin-left",left_margin+"px");}if(((win_width-content_width)/2)<(parseInt($("#sticky_sharing").css("width"))+20)){$("#sticky_sharing").hide();$(".inline_sharing").show();return false;}else{$("#sticky_sharing").show();$(".inline_sharing").hide();$("body#gallerytemplate #sticky_sharing .position_reference,body#real_time_billionaires #sticky_sharing .position_reference").css("margin-left","-80px");_on_scroll();}return false;}function _on_scroll(){var object_block=$("#sticky_sharing .controls");if(object_block.length<1){return false;}var page_scroll=parseInt($(document).scrollTop());var fixed_range_top=$("#sticky_sharing .position_reference").offset().top-_margin_top;var fixed_range_bottom=$("footer").offset().top-(object_block.outerHeight()+_margin_bottom);var in_article_body=($("#sticky_sharing").hasClass("in_article_body"))?true:false;if((page_scroll<fixed_range_top&&_mode!="relative")||in_article_body){object_block.css({position:"relative",top:"0"});_mode="relative";}else{if(page_scroll>fixed_range_top&&page_scroll<fixed_range_bottom&&_mode!="fixed"){object_block.css({position:"fixed",top:_margin_top+"px"});_mode="fixed";}else{if(page_scroll>fixed_range_bottom&&_mode!="absolute"){object_block.css({position:"absolute",top:(fixed_range_bottom-$("#sticky_sharing .position_reference").offset().top+_margin_top)+"px"});_mode="absolute";}}}}return{init:_init};}($));return app;}(forbes||{},jQuery));forbes.bootstrap.register(forbes.sharing.init);var forbes=(function(app,$){app.profile_header=(function($){var _track=null,_listuri=null;function _init(){_track=forbes.event_tracking.track_ga_event;_listuri=$("header.list-header").data("listuri");_init_tracking();$(window).scroll(function(){var value=$(this).scrollTop();if(value>135){$(".lander_person h1").animate({bottom:0});}else{$(".lander_person h1").animate({bottom:-40});}});}function _init_tracking(){$(".list-header .forbes-logo").click(function(event){var $this=$(this);var href=$this.parent().attr("href");_track_link_click(href,"ProfileHeader","LogoClick",_listuri);event.preventDefault();});$(".list-header h1 a").click(function(event){var $this=$(this);var href=$this.attr("href");_track_link_click(href,"ProfileHeader","TitleClick",_listuri);event.preventDefault();});}function _track_link_click(link,category,action,label){_track([category,action,label]);setTimeout(function(){window.location=link;},250);}return{init:_init};}($));return app;}(forbes||{},jQuery));forbes.bootstrap.register(forbes.profile_header.init);var forbes=(function(app,$){app.lazy_ad=(function($){function _init(){$(".lazy_ad").each(function(index){_init_scroll_check($(this).attr("id"));});}function _init_scroll_check(ad_id){if(_has_specialslot()||_has_swimlane()){if(!_check_activate(ad_id)){$(window).on("scroll."+ad_id,function(){if(_check_activate(ad_id)){$(window).off("scroll."+ad_id);}});}}else{googletag.cmd.push(function(){googletag.display(ad_id);});}}function _check_activate(ad_id){var visible=forbes.util.is_node_visible($("#"+ad_id));if((_has_specialslot()||_has_swimlane())&&!!visible&&visible.is_in_view){googletag.cmd.push(function(){googletag.display(ad_id);});return true;}return false;}function _has_specialslot(){return !!app.analytics.get_var("forbes.page_meta.special_slot");}function _has_swimlane(){return !!window.google_tag_swimlane||!!window.location.href.match(/(\?|&)ss=([^&]+)(&|$)/);}return{init:_init,init_scroll_check:_init_scroll_check};}($));return app;}(forbes||{},jQuery));forbes.bootstrap.register(forbes.lazy_ad.init);